
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../benchmarking/" rel="prev"/>
<link href="../add_your_own_tests/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.25" name="generator"/>
<title>(CLI) Running Red Teaming - Moonshot</title>
<link href="../../../assets/stylesheets/main.6543a935.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#run-red-teaming-sessions">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Moonshot" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Moonshot">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Moonshot
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              (CLI) Running Red Teaming
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/aiverify-foundation/moonshot" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Moonshot" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Moonshot">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Moonshot
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/aiverify-foundation/moonshot" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting_started/quick_start/">
<span class="md-ellipsis">
    Quick Start Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting_started/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting_started/quick_install/">
<span class="md-ellipsis">
    Quick Install
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting_started/first_test/">
<span class="md-ellipsis">
    Your First Test
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Tutorials
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    Web UI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            Web UI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/web-ui/create_cookbook/">
<span class="md-ellipsis">
    (UI) How to Create Custom Cookbook
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/web-ui/create_endpoint/">
<span class="md-ellipsis">
    (UI) How to Create Connector Endpoint
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/web-ui/benchmark/">
<span class="md-ellipsis">
    (UI) How to Run Benchmark Tests
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/web-ui/redteam/">
<span class="md-ellipsis">
    (UI) How to Run Red Teaming
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    CLI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            CLI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/cli/create_benchmark_tests/">
<span class="md-ellipsis">
    (CLI) How to Create Custom Benchmark Tests
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/cli/create_endpoint/">
<span class="md-ellipsis">
    (CLI) How to Create Connector Endpoint
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/cli/run_benchmark_tests/">
<span class="md-ellipsis">
    (CLI) How to Run Benchmark Tests
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/cli/run_red_teaming/">
<span class="md-ellipsis">
    (CLI) How to Run Red Teaming
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Contributor
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Contributor
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/contributor/configure_web_api/">
<span class="md-ellipsis">
    Configure Moonshot Web-API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorial/contributor/create_connector/">
<span class="md-ellipsis">
    Create a New Custom Connector
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    User Guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Moonshot Web UI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Moonshot Web UI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/web_ui_guide/">
<span class="md-ellipsis">
    Get Started with Moonshot Web UI
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Moonshot Interface
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_2">
<span class="md-nav__icon md-icon"></span>
            Moonshot Interface
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/homepage/">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/endpoint/">
<span class="md-ellipsis">
    Endpoint
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/benchmarking/">
<span class="md-ellipsis">
    Benchmarking
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/redteaming/">
<span class="md-ellipsis">
    Red Teaming
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/history/">
<span class="md-ellipsis">
    History
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/moonshot_interface/utils/">
<span class="md-ellipsis">
    Utils
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
<span class="md-ellipsis">
    Testing Workflow
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_3">
<span class="md-nav__icon md-icon"></span>
            Testing Workflow
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/choosing_relevant_tests/">
<span class="md-ellipsis">
    (UI) Choosing Relevant Tests
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/connecting_to_llms/">
<span class="md-ellipsis">
    (UI) Connecting to LLMs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/running_benchmarks/">
<span class="md-ellipsis">
    (UI) Running Benchmarks
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/running_red_teaming/">
<span class="md-ellipsis">
    (UI) Conducting Red Teaming
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_ui/creating_custom_cookbooks/">
<span class="md-ellipsis">
    (UI) Creating Custom Cookbooks
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-ellipsis">
    CLI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            CLI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../connecting_endpoints/">
<span class="md-ellipsis">
    (CLI) Connecting to LLMs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../benchmarking/">
<span class="md-ellipsis">
    (CLI) Running Benchmark
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    (CLI) Running Red Teaming
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    (CLI) Running Red Teaming
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#create-a-connector-endpoint">
<span class="md-ellipsis">
      Create a Connector Endpoint
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#create-a-session">
<span class="md-ellipsis">
      Create a Session
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-red-teaming">
<span class="md-ellipsis">
      Manual Red Teaming
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automated-red-teaming-run-attack-modules">
<span class="md-ellipsis">
      Automated Red Teaming (Run Attack Modules)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ending-and-resuming-a-session">
<span class="md-ellipsis">
      Ending and Resuming a Session
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configurations-in-a-session">
<span class="md-ellipsis">
      Configurations in a Session
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#more-about-automated-red-teaming">
<span class="md-ellipsis">
      More About Automated Red Teaming
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../add_your_own_tests/">
<span class="md-ellipsis">
    (CLI) Adding Your Own Tests
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cli_command_list/">
<span class="md-ellipsis">
    (CLI) CLI Command List
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
<span class="md-ellipsis">
    Moonshot Library
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            Moonshot Library
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_bookmark/">
<span class="md-ellipsis">
    Bookmark API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_connector_endpoint/">
<span class="md-ellipsis">
    Connector Endpoint API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_connector/">
<span class="md-ellipsis">
    Connector API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_context_strategy/">
<span class="md-ellipsis">
    Context Strategy API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_cookbook/">
<span class="md-ellipsis">
    Cookbook API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_dataset/">
<span class="md-ellipsis">
    Dataset API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_environment_variables/">
<span class="md-ellipsis">
    Environment Variable API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_metrics/">
<span class="md-ellipsis">
    Metric API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_prompt_template/">
<span class="md-ellipsis">
    Prompt Template API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_recipe/">
<span class="md-ellipsis">
    Recipe API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_red_teaming/">
<span class="md-ellipsis">
    Red Teaming API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_result/">
<span class="md-ellipsis">
    Result API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_run/">
<span class="md-ellipsis">
    Run API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_runner/">
<span class="md-ellipsis">
    Runner API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/api_session/">
<span class="md-ellipsis">
    Session API
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api_reference/web_api_swagger/">
<span class="md-ellipsis">
    Web-API
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Resources
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Resources
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/jupyter_notebook/">
<span class="md-ellipsis">
    Jupyter Notebook
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/cookbooks/">
<span class="md-ellipsis">
    Cookbook
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/recipes/">
<span class="md-ellipsis">
    Recipes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/datasets/">
<span class="md-ellipsis">
    Datasets
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/metrics/">
<span class="md-ellipsis">
    Metrics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../resources/attack_modules/">
<span class="md-ellipsis">
    Attack Modules
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/">
<span class="md-ellipsis">
    Contributor Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../faq/">
<span class="md-ellipsis">
    FAQ
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="run-red-teaming-sessions">Run Red Teaming Sessions</h1>
<p>In this section, we will be going through the steps required to run red teaming sessions.</p>
<p>To run a test, you will need:</p>
<ul>
<li><strong>Connector Endpoint</strong> - a configuration file to connect to your desired LLM endpoint</li>
<li><strong>Session</strong> - a session allows users to perform manual and automated red teaming on the LLMs, and stores the prompts and responses to and fro.</li>
<li><strong>Prompt</strong> - a prompt that you will be sending to LLMs in manual red teaming/ a starting prompt to input in attack modules before sending to the LLMs</li>
</ul>
<p>For the following steps, they will be done in interactive mode in CLI. To activate interactive mode, enter:</p>
<div class="language-text highlight"><pre><span></span><code>python -m moonshot cli interactive
</code></pre></div>
<h3 id="create-a-connector-endpoint">Create a Connector Endpoint</h3>
<p>If you have not already created a connector endpoint, check out the guide <a href="../connecting_endpoints/">here</a>.</p>
<h3 id="create-a-session">Create a Session</h3>
<p>Once your connector endpoint is created, we can start creating our session for red teaming.</p>
<p>Every session must reside in a runner. Before we create a session, enter the following command to view a list of runners currently available by entering:</p>
<div class="language-text highlight"><pre><span></span><code>list_runners
</code></pre></div>
<p><img alt="list of runners" src="../cli_images/runners.png"/></p>
<p>There are two options to create a session: you can either use an existing runner, or create a new runner with a session. To better understand its usage, enter the following command:</p>
<div class="language-text highlight"><pre><span></span><code>new_session -h
</code></pre></div>
<ol>
<li>
<p>Use existing runner.</p>
<ul>
<li>
<p>Example:</p>
<div class="language-text highlight"><pre><span></span><code>new_session my-test-mrt -c add_previous_prompt -p mmlu
</code></pre></div>
<ul>
<li>Runner ID: <code>my-test-mrt</code></li>
<li>Context strategy: <code>add_previous_prompt</code></li>
<li>Prompt template:  <code>mmlu</code></li>
</ul>
</li>
</ul>
<p><img alt="create session with existing runner" src="../cli_images/create_session_existing_runner.png"/></p>
<blockquote>
<p><strong><em>NOTE:</em></strong>  Context strategy and prompt template are optional and can be set later so you can omit the <code>-c -p</code> flags if you do not need them    </p>
</blockquote>
</li>
<li>
<p>Create new runner.</p>
<ul>
<li>
<p>Example: </p>
<div class="language-text highlight"><pre><span></span><code>new_session my-new-runner-test-mrt -e "['openai-gpt35-turbo','openai-gpt4']" -p phrase-relatedness
</code></pre></div>
<ul>
<li>Runner ID: <code>my-new-runner-test-mrt</code></li>
<li>Endpoint: <code>['openai-gpt35-turbo','openai-gpt4']</code></li>
<li>Prompt template: <code>phrase-relatedness</code></li>
</ul>
</li>
</ul>
<p><img alt="create session with new runner" src="../cli_images/create_session_new_runner.png"/></p>
</li>
</ol>
<p>Once you have a session created and activated, we can proceed with red teaming. There are two ways to perform red teaming:
manual red teaming and using attack modules to perform automated attacks. </p>
<h3 id="manual-red-teaming">Manual Red Teaming</h3>
<p>From the previous section, you should have a session created and activated. For manual red teaming, you can start by typing something in the session and that prompt will be sent to all the LLMs in that session. 
    <img alt="manual red teaming pt" src="../cli_images/manual_red_teaming_pt.png"/></p>
<blockquote>
<p><strong><em>NOTE:</em></strong>  Anything entered in a session that is not a command will be considered a prompt and sent to the LLMs in that session! </p>
</blockquote>
<h3 id="automated-red-teaming-run-attack-modules">Automated Red Teaming (Run Attack Modules)</h3>
<p>We will use the same session from manual red teaming in this example. Enter the following command to find out more about running attack modules:</p>
<div class="language-text highlight"><pre><span></span><code>run_attack_module -h
</code></pre></div>
<p>You should see a help example:</p>
<div class="language-text highlight"><pre><span></span><code>run_attack_module charswap_attack "The grandpa and his son went to does not know how to use a phone?\na)Grandpa\nb)Son."
</code></pre></div>
<p>The fields are as follows for this example:</p>
<ul>
<li>Attack module ID:  <code>charswap_attack</code></li>
<li>Prompt: <code>The grandpa and his son went to does not know how to use a phone?\na)Grandpa\nb)Son.</code></li>
</ul>
<p><img alt="automated red teaming" src="../cli_images/automated_red_teaming.png"/></p>
<p>Refer to this <a href="#more-about-automated-red-teaming">section</a> for more information on automated red teaming</p>
<h3 id="ending-and-resuming-a-session">Ending and Resuming a Session</h3>
<p>End session - Once you are done with red teaming, you can close the session by entering: </p>
<div class="language-text highlight"><pre><span></span><code>end_session
</code></pre></div>
<p>View sessions -  You can view your sessions by entering: </p>
<div class="language-text highlight"><pre><span></span><code>list_sessions
</code></pre></div>
<p>Resume session - You can resume a session by entering:</p>
<div class="language-text highlight"><pre><span></span><code>use_session &lt;desired session id&gt;
</code></pre></div>
<p>where <code>&lt;desired session id&gt;</code> is an <code>id</code> in <code>list_sessions</code>. When you resume a session, the state of your previous red teaming attempts will be restored.</p>
<h3 id="configurations-in-a-session">Configurations in a Session</h3>
<ul>
<li>
<p>These are the configurations you can set in a session:</p>
<ul>
<li>
<p>Context strategy: a Python module that helps to add context to the current prompt (i.e. add in the previous five prompts sent.) </p>
<p>To use a context strategy:</p>
<div class="language-text highlight"><pre><span></span><code>use_context_strategy &lt;desired context strategy id&gt;
</code></pre></div>
<p>You can use the following command to view the list of context strategies available:</p>
<div class="language-text highlight"><pre><span></span><code>list_context_strategies
</code></pre></div>
<p>The <code>&lt;desired context strategy id&gt;</code> should correspond to an <code>Id</code> in <code>list_context_strategies</code>.</p>
<ul>
<li>It is also possible to set the number of previous prompts to use with a context strategy. For example, to add <code>8</code> previous prompts as context using the <code>add_previous_prompt</code>, use the command:<div class="language-text highlight"><pre><span></span><code>use_context_strategy add_previous_prompt -n 8
</code></pre></div>
</li>
</ul>
<p>To clear a context strategy in a session, use:</p>
<div class="language-text highlight"><pre><span></span><code>clear_context_strategy
</code></pre></div>
</li>
<li>
<p>Prompt template: a JSON file which contains static texts that is appended to every prompt before they are sent to the LLMs. </p>
<p>To use a prompt template:</p>
<div class="language-text highlight"><pre><span></span><code>use_prompt_template &lt;desired prompt template id&gt;
</code></pre></div>
<p>You can use the following command to view the list of prompt templates available:</p>
<div class="language-text highlight"><pre><span></span><code>list_prompt_templates
</code></pre></div>
<p>The <code>&lt;desired prompt template id&gt;</code> should correspond to an <code>Id</code> in <code>list_prompt_templates</code>.</p>
<p>To clear a prompt template in a session, use:</p>
<div class="language-text highlight"><pre><span></span><code>clear_prompt_template
</code></pre></div>
</li>
</ul>
</li>
</ul>
<h3 id="more-about-automated-red-teaming">More About Automated Red Teaming</h3>
<p>Currently, automated red teaming heavily relies on the attack module being used. We have created a class, AttackModule, which serves as the base class for creating custom attack modules within the Moonshot framework. This class provides a structure that red teamers can extend to implement their own adversarial attack strategies.</p>
<p>In the AttackModule class, we have simplified the process for red teamers by providing easy access to necessary components for red teaming, such as connector endpoints and a function to automatically wrap the prompt template and context strategy contents around the provided prompt.</p>
<p>The design is very free-form, thus it is entirely up to the attack module developers whether they want to use the functions we have prepared. For instance, they may choose not to use the context strategy and prompt template at all in the attack module, even though these may be set in the session.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: (CLI) Running Benchmark" class="md-footer__link md-footer__link--prev" href="../benchmarking/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                (CLI) Running Benchmark
              </div>
</div>
</a>
<a aria-label="Next: (CLI) Adding Your Own Tests" class="md-footer__link md-footer__link--next" href="../add_your_own_tests/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                (CLI) Adding Your Own Tests
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.footer", "navigation.top", "toc.integrate", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.081f42fc.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>